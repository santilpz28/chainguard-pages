/* =====================================================================
   RESET / NORMALIZE
   ===================================================================== */
*,*::before,*::after{box-sizing:border-box}*{margin:0}html,body{height:100%}
img,video,canvas,svg{display:block;max-width:100%}
input,button,textarea,select{font:inherit}a{color:inherit;text-decoration:none}

/* =====================================================================
   TOKENS (Dark por defecto) + Light overrides
   ===================================================================== */
:root{
  --bg:#0b0f14; --surface:#0f1620; --text:#e5ecf4; --muted:#a3adc2;
  --border:rgba(255,255,255,.08); --border-strong:rgba(255,255,255,.14);
  --accent:#22d3ee; --ok:#22c55e; --warn:#fde047; --bad:#ef4444;

  --radius:16px; --radius-sm:12px;
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --ease:200ms ease;

  /* Timeline */
  --tl-line:#1f2a35; --tl-dot:48px; --tl-bar:220px;
}
html.theme-light{
  --bg:#f6f4ef; --surface:#eee9e1; --text:#1f2937; --muted:#475569;
  --border:rgba(0,0,0,.10); --border-strong:rgba(0,0,0,.20);
  --shadow:0 10px 24px rgba(0,0,0,.08);
}

html,body{
  background:var(--bg); color:var(--text);
  -webkit-font-smoothing:antialiased;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
}

a:focus-visible,button:focus-visible,input:focus-visible,textarea:focus-visible{
  outline:2px solid color-mix(in oklab, var(--accent) 70%, transparent);
  outline-offset:2px;
}

/* =====================================================================
   UTILIDADES / LAYOUT
   ===================================================================== */
.section{max-width:72rem;margin-inline:auto;padding-inline:1rem}
.section-pad{padding-block:3rem}.section-pad-sm{padding-block:1.5rem}
.title-xl{font-weight:800;line-height:1.1;font-size:clamp(1.875rem,2.8vw,3rem)}
.lead{color:var(--muted)}.accent{color:var(--accent)}
.auto-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1rem}

/* =====================================================================
   HEADER / NAV
   ===================================================================== */
.site-header{position:sticky;top:0;z-index:50;backdrop-filter:blur(8px);background:color-mix(in oklab, var(--bg) 80%, transparent);border-bottom:1px solid var(--border)}
.header-inner{display:flex;align-items:center;justify-content:space-between;padding-block:.75rem}
.site-nav{display:flex;gap:1.5rem;align-items:center}
.site-nav a{color:color-mix(in oklab, var(--text) 65%, transparent);font-size:.95rem}
.site-nav a:hover{color:var(--text)}

/* =====================================================================
   COMPONENTES
   ===================================================================== */
.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);transition:transform var(--ease),border-color var(--ease),box-shadow var(--ease);box-shadow:var(--shadow)}
.card:hover{transform:translateY(-2px);border-color:var(--border-strong)}
.glass{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow)}
.chip{border:1px dashed color-mix(in oklab, var(--text) 18%, transparent);border-radius:10px;padding:.25rem .5rem;cursor:pointer}
.kbd{border:1px solid color-mix(in oklab, var(--text) 25%, transparent);border-bottom-width:3px;border-radius:8px;padding:.1rem .4rem}
.pulse{box-shadow:0 0 0 0 rgba(34,211,238,.7);animation:pulse 2s infinite}
@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(34,211,238,.4)}70%{box-shadow:0 0 0 20px rgba(34,211,238,0)}100%{box-shadow:0 0 0 0 rgba(34,211,238,0)}}

.btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.7rem 1rem;border-radius:var(--radius-sm);border:1px solid transparent;font-weight:500;transition:transform var(--ease),border-color var(--ease),background-color var(--ease)}
.btn:active{transform:translateY(1px)}
.btn-primary{background:rgba(34,211,238,.18);border-color:rgba(34,211,238,.4);color:var(--text);cursor:not-allowed}
.btn-outline{background:transparent;border-color:var(--border-strong);color:var(--text)}
.btn-outline:hover{border-color:color-mix(in oklab, var(--text) 28%, transparent)}

.site-footer{border-top:1px solid var(--border);backdrop-filter:blur(2px)}

.skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
.skip-link:focus{left:12px;top:12px;width:auto;height:auto;padding:8px 12px;background:#000;color:#fff;border-radius:8px}

/* =====================================================================
   PORTFOLIO
   ===================================================================== */
.portfolio-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem}
@media (max-width:1100px){.portfolio-grid{grid-template-columns:repeat(3,1fr)}}
@media (max-width:768px){.portfolio-grid{grid-template-columns:repeat(2,1fr)}}
@media (max-width:480px){.portfolio-grid{grid-template-columns:1fr}}

/* Perfil - imagen completa */
.profile-media{display:grid;place-items:center;border-radius:var(--radius);overflow:hidden}
.profile-img{width:100%;height:auto;object-fit:contain;display:block}

/* =====================================================================
   FORM
   ===================================================================== */
.form{display:flex;flex-direction:column;gap:1rem}
.form-row{display:flex;gap:1rem}
@media (max-width:768px){.form-row{flex-direction:column}}
.form-field{flex:1;display:flex;flex-direction:column;gap:.4rem}
.form-label{font-size:.9rem;color:var(--muted)}
.input,.textarea{width:100%;background:rgba(255,255,255,.04);border:1px solid var(--border);color:var(--text);padding:.75rem .9rem;border-radius:var(--radius-sm);outline:none;transition:border-color var(--ease),box-shadow var(--ease),background-color var(--ease)}
html.theme-light .input,html.theme-light .textarea{background:rgba(0,0,0,.02)}
.input::placeholder,.textarea::placeholder{color:#98a2b3}
.input:focus,.textarea:focus{border-color:color-mix(in oklab, var(--accent) 55%, transparent);box-shadow:0 0 0 4px color-mix(in oklab, var(--accent) 22%, transparent);background:color-mix(in oklab, var(--surface) 70%, transparent)}

/* =====================================================================
   TIMELINE — Controles
   ===================================================================== */
.tl-controls{display:flex;flex-wrap:wrap;align-items:center;gap:10px;margin-top:10px}
.search{flex:1 1 280px;display:flex;align-items:center;background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:8px 10px}
.search input{flex:1;background:transparent;border:none;outline:none;color:var(--text)}
.chipbar{display:flex;gap:8px;flex-wrap:wrap}
.chipbar .chip[data-active="true"]{outline:2px solid var(--accent)}
.typebar{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
.toggle{border:1px solid var(--border-strong);border-radius:999px;padding:6px 10px;font-size:.85rem;cursor:pointer;background:transparent}
.toggle[data-on="true"]{outline:2px solid var(--accent)}

.nextdrop{display:flex;align-items:center;gap:12px;background:linear-gradient(145deg,#0f141a,#0b1015);border:1px solid var(--border);border-radius:14px;padding:10px 14px;box-shadow:var(--shadow)}
.pill{border:1px dashed #334155;border-radius:999px;padding:4px 10px;color:#cbd5e1;font-size:.82rem}
.count{font-weight:700;letter-spacing:.5px}
.blink{animation:pulse 1.5s ease infinite}

/* =====================================================================
   TIMELINE — Items
   ===================================================================== */
.timeline{display:grid;gap:22px;position:relative;margin-top:20px;padding-inline:2px}
.item{position:relative;display:grid;align-items:center;gap:10px;opacity:.0;transform:translateY(6px);transition:opacity .35s ease,transform .35s ease}
.item.in{opacity:1;transform:none}
.item.left{grid-template-columns:auto var(--tl-bar) 1fr}
.item.right{grid-template-columns:1fr var(--tl-bar) auto}

.bar{height:2px;background:var(--tl-line);position:relative;overflow:visible}
.bar::after{content:"";position:absolute;inset:0;transform:scaleX(0);transform-origin:left;background:linear-gradient(90deg,rgba(34,211,238,.0),rgba(34,211,238,.6),rgba(34,211,238,.0));animation:tl-sweep 1.2s ease forwards}
@keyframes tl-sweep{to{transform:scaleX(1)}}

.title{position:absolute;top:-1.7rem;white-space:nowrap;color:var(--text);font-weight:600;font-size:.98rem;text-shadow:0 0 18px rgba(34,211,238,.06);max-width:42vw;overflow:hidden;text-overflow:ellipsis}
.item.left .title{left:0}
.item.right .title{right:0;text-align:right}

.dot{width:var(--tl-dot);height:var(--tl-dot);border-radius:50%;border:2px solid #c7d2da;background:transparent;cursor:pointer;display:grid;place-items:center;position:relative;outline:none;transition:transform .12s ease,border-color .2s}
.dot:hover{transform:translateY(-1px)}
.dot[data-active="true"]{border-color:var(--accent)}
.dot::after{content:attr(data-date);font-size:.78rem;color:#cbd5e1;opacity:0;transform:translateY(2px);transition:opacity .15s ease,transform .15s ease}
.dot:hover::after,.dot:focus-visible::after{opacity:1;transform:translateY(0)}

/* Popover (desktop) + Bottom-sheet (móvil) */
.popover{position:fixed;min-width:min(420px,88vw);max-width:92vw;background:var(--surface);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:14px 16px 12px;z-index:100;display:none}
.popover[data-open="true"]{display:block}
.popover h3{margin:.1rem 0 .35rem;font-size:1.02rem;word-break:break-word}
.popover time{color:var(--muted);font-size:.86rem}
.popover p{margin:.35rem 0 .35rem;color:#d1d5db;word-break:break-word}
.meta{display:flex;flex-wrap:wrap;gap:6px;margin-top:4px}
.tag{background:#0b1015;border:1px solid #1f2937;padding:2px 8px;border-radius:999px;font-size:.78rem;color:#d1d5db}
.actions{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
.popover .btn{border:1px solid #334155;background:#0c1116;color:#dbe2ea;border-radius:10px;padding:6px 10px;cursor:pointer}
.popover .btn:hover{border-color:#475569}
.close{position:absolute;top:6px;right:8px;border:none;background:transparent;color:#9fb0c1;font-size:20px;line-height:1;cursor:pointer}
.close:hover{color:#e5e7eb}
.popover::before{content:"";position:absolute;width:10px;height:10px;background:var(--surface);border-left:1px solid var(--border);border-top:1px solid var(--border);transform:rotate(45deg)}
.popover[data-side="left"]::before{right:-6px;top:16px}
.popover[data-side="right"]::before{left:-6px;top:16px}

.result-info{color:var(--muted);font-size:.9rem;margin:8px 0 0}

/* Tipos de evento */
.dot--exp{border-color:#22d3ee}
.dot--post{border-color:#a78bfa}
.dot--cert{border-color:#22c55e}
.dot--milestone{border-color:#f59e0b}

/* =====================================================================
   SCRIM + TOAST
   ===================================================================== */
.scrim{position:fixed;inset:0;background:rgba(0,0,0,.5);backdrop-filter:blur(2px);opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:90}
.scrim[data-show="true"]{opacity:1;pointer-events:auto}
.toast{position:fixed;bottom:18px;left:50%;transform:translateX(-50%);background:#10161c;border:1px solid #334155;border-radius:12px;padding:10px 14px;color:#e5e7eb;box-shadow:var(--shadow);z-index:9999;display:none}

/* =====================================================================
   MOBILE TWEAKS
   ===================================================================== */
@media (max-width:700px){
  :root{ --tl-dot:36px; --tl-bar:150px }
  .timeline{gap:16px;padding-inline:4px}
  .item.left,.item.right{grid-template-columns:auto 1fr}
  .item.right .title{left:0;right:auto;text-align:left}
  .bar{grid-column:2}
  .title{font-size:.95rem;top:-1.35rem;max-width:72vw}
  .dot::after{position:absolute;top:calc(100% + 4px)}

  /* Bottom-sheet fijo */
  .popover{
    position:fixed;left:0;right:0;bottom:0;top:auto;
    max-height:70vh;min-width:auto;max-width:none;
    border-radius:16px 16px 0 0;
    padding:14px 16px calc(12px + env(safe-area-inset-bottom));
  }
  .popover::before{display:none}
  .popover[data-open="true"]{display:block;transform:translateY(0);transition:transform .18s ease}
  .popover[hidden]{display:none}
}

/* =====================================================================
   REDUCE MOTION
   ===================================================================== */
@media (prefers-reduced-motion:reduce){
  *{animation-duration:.01ms !important;animation-iteration-count:1 !important;transition-duration:.01ms !important;scroll-behavior:auto !important}
}

/* =====================================================================
   PRINT
   ===================================================================== */
@media print{
  .site-header,.site-footer,.tl-controls,.nextdrop,.scrim{display:none !important}
  .card,.glass{box-shadow:none !important}
  body{background:#fff;color:#111}
  .popover{display:block !important;position:static !important;border:1px solid #ddd !important}
}

/* =====================================================================
   TRABAJAR LUEGO (PWA / assets):
   - Añadir manifest.json e iconos
   - Service Worker para cache estático
   - Estilos de "instalable"
   ===================================================================== */
